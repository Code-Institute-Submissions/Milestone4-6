{% extends 'base.html' %}
{% load static %}

{% block page_title %}{{ user }}'s Profile{% endblock %}

{% block page_heading %}
{{ user }}'s Profile
{% endblock %}

{% block content %}
<section class="section-margin section-padding">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1>{{ profile.username }}'s Profile</h1>
                <h5>Account: {{ profile.email }}</h5>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="row">
            <div class="col-12 h2-padding-top text-center">
                <h2>Order History:</h2>
            </div>
        </div>
    </div>
    {% for order in orders %}
    {% for lineitem in order.lineitems.all %}
    <div class="container">
        <div class="cart-item-style-around">
            <div class="row">
                <p>{{ info.id }}</p>
            </div>
            <div class="row text-center">
                <div class="col-sm-12 col-md-3">
                    <div class="item" style="background-image: url('{{ MEDIA_URL }}{{ lineitem.product.image }}')"></div>
                </div>
                <div class="col-sm-12 col-md-3">
                    <p>Product: {{ lineitem.product.name }}</p>
                    <p>Amount: {{ lineitem.quantity }}</p>
                    <p>Price per item: {{ lineitem.price }}€</p>
                    <p>Price: {{ lineitem.total }}€</p>
                </div>
                <div class="col-sm-12 col-md-3">
                    <p>Date: {{ order.date }}</p>
                    <p>Full Name: {{ order.full_name }}</p>
                    <p>Phone Number: {{ order.phone_number }}</p>
                </div>
                <div class="col-sm-12 col-md-3">
                    <p>Postcode: {{ order.postcode }}</p>
                    <p>Town/City: {{ order.town_or_city }}</p>
                    <p>Address 1: {{ order.street_address1 }}</p>
                    <p>Address 2: {{ order.street_address2 }}</p>
                    <p>County: {{ order.county }}</p>
                    <p>Country: {{ order.country }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    {% endfor %}
</section>
{% endblock %}